<div class="row gap-20 masonry pos-r" id="instagram-stats">
  <div class="masonry-item w-100">
    <div class="row gap-20">
      <div class="col-md-3">
        <div class="layers bd bgc-white p-20">
          <div class="layer w-100 mB-10">
            <h6 class="lh-1">Instagram Followers</h6>
          </div>
          <div class="layer w-100">
            <div class="peers ai-sb fxw-nw">
              <div class="peer peer-greed">
                <span id="sparklinedash">
                  <canvas width="45" height="20"
                    style="display: inline-block; width: 45px; height: 20px; vertical-align: top;">
                  </canvas>
                </span>
              </div>
              <div class="peer">
                <span class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-green-50 c-green-500">{{ instagram_followers_count }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="layers bd bgc-white p-20">
          <div class="layer w-100 mB-10">
            <h6 class="lh-1">Media Count</h6>
          </div>
          <div class="layer w-100">
            <div class="peers ai-sb fxw-nw">
              <div class="peer peer-greed">
                <span id="sparklinedash">
                  <canvas width="45" height="20"
                    style="display: inline-block; width: 45px; height: 20px; vertical-align: top;">
                  </canvas>
                </span>
              </div>
              <div class="peer">
                <span class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-green-50 c-green-500">{{ instagram_media_count }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="layers bd bgc-white p-20">
          <div class="layer w-100 mB-10">
            <h6 class="lh-1">Instagram Reach</h6>
          </div>
          <div class="layer w-100">
            <div class="peers ai-sb fxw-nw">
              <div class="peer peer-greed">
                <span id="sparklinedash2">
                  <canvas width="45" height="20"
                    style="display: inline-block; width: 45px; height: 20px; vertical-align: top;">

                  </canvas>
                </span>
              </div>
              <div class="peer">
                <span class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-purple-50 c-purple-500">{{ instagram_Reach }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="layers bd bgc-white p-20">
          <div class="layer w-100 mB-10">
            <h6 class="lh-1">Instagram Impressions</h6>
          </div>
          <div class="layer w-100">
            <div class="peers ai-sb fxw-nw">
              <div class="peer peer-greed">
                <span id="sparklinedash2">
                  <canvas width="45" height="20"
                    style="display: inline-block; width: 45px; height: 20px; vertical-align: top;">

                  </canvas>
                </span>
              </div>
              <div class="peer">
                <span class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-purple-50 c-purple-500">{{ instagram_Impressions }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row gap-20">
      <div class="col-md-6">
        <div class="layers bd bgc-white p-20">
          <div class="layer w-100 mB-10">
            <h6 class="lh-1">Audience City</h6>
          </div>
          <div class="layer w-100">
            <div class="peers ai-sb fxw-nw">
              <div class="peer peer-greed">
                <span id="sparklinedash">
                  <canvas width="45" height="20"
                    style="display: inline-block; width: 45px; height: 20px; vertical-align: top;">
                  </canvas>
                </span>
              </div>
              <div class="peer">
                <span class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-green-50 c-green-500">{{ "instagram_Audience town/city" | length }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="layers bd bgc-white p-20">
          <div class="layer w-100 mB-10">
            <h6 class="lh-1">Audience Countries</h6>
          </div>
          <div class="layer w-100">
            <div class="peers ai-sb fxw-nw">
              <div class="peer peer-greed">
                <span id="sparklinedash">
                  <canvas width="45" height="20"
                    style="display: inline-block; width: 45px; height: 20px; vertical-align: top;">
                  </canvas>
                </span>
              </div>
              <div class="peer">
                <span class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-purple-50 c-purple-500">{{ "instagram_Audience country" | length }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="masonry-item col-md-12">
    <div class="bd bgc-white">
      <div class="layers">
        <div class="layer w-100 pX-20 pT-20">
          <h6 class="lh-1">Instagram Combined Stats</h6>
        </div>
        <div class="layer w-100 p-20">
          <div id="instagram-combined-chart"></div>
        </div>
        <div class="layer bdT p-20 w-100">
          <div class="peers ai-c jc-c gapX-20">
            <div class="peer">
              <span class="fsz-def fw-600 mR-10 c-grey-800"><i
                  class="fa fa-level-up c-green-500"></i></span>
              <small class="c-grey-500 fw-600">Click on data-points to open Instagram Posts</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="masonry-item col-md-6">
    <div class="bd bgc-white">
      <div class="layers">
        <div class="layer w-100 pX-20 pT-20">
          <h6 class="lh-1">Instagram Audience Town/City</h6>
        </div>
        <div class="layer w-100 p-20">
          <div id="instagram_Audience_town_city"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="masonry-item col-md-6">
    <div class="bd bgc-white">
      <div class="layers">
        <div class="layer w-100 pX-20 pT-20">
          <h6 class="lh-1">Instagram Audience Gender and Age</h6>
        </div>
        <div class="layer w-100 p-20">
          <div id="instagram_Audience_gender_age"></div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  let instagram_id = {{instagram_id}};
  let instagram_comments_count = {{instagram_comments_count}};
  let instagram_like_count = {{instagram_like_count}};
  let instagram_permalink = {{instagram_permalink}};
  let instagram_Audience_gender_age = {{instagram_Gender_and_age}};
  let instagram_Audience_town_city = {{instagram_Audience_town_city}};

  var instagram_options = {

    chart: {
        id: "instagram-combined-stats-chart",
        width: '100%',
        height: 460,
        foreColor: "#373d3f",
        toolbar: {
            show: true
        },
        events: {
            dataPointSelection: function(event, chartContext, opts) {
              const url = `${instagram_permalink[opts.dataPointIndex]}`;
              window.open(url);
            }
        }
    },

    colors: ['#2E93fA', '#66DA26', '#546E7A', '#E91E63', '#FF9800', '#454687', '#928F92', '#d63c6c', '#17277d', '#4fd97d'],
    stroke: {
        curve: 'smooth',
        width: 4,
    },

    grid: {
        borderColor: "#555",
        clipMarkers: false,
        yaxis: {
            lines: {
                show: false
            }
        }
    },

    dataLabels: {
        enabled: false
    },

    fill: {
        type: "gradient",
        gradient: {
            enabled: true,
            opacityFrom: 0.7,
            opacityTo: 0.9,
            stops: [0, 90, 100],
        }
    },

    markers: {
        size: 3,
        colors: ['#2E93fA', '#66DA26', '#546E7A', '#E91E63', '#FF9800', '#454687', '#928F92'],
        strokeColor: "#65B051",
        strokeWidth: 1
    },

    series: [
        {
            type: "line",
            data: get_array(instagram_like_count),
            name: "Likes",
        },
        {
          type: "line",
          data: get_array(instagram_comments_count),
          name: "Comments",
        },      
    ],

    tooltip: {
        theme: "light"
    },

    xaxis: {
      categories: instagram_id
    },

    yaxis: {
        min: 0,
        tickAmount: 4
    },
};

  let instagramCombinedChart = new ApexCharts(document.querySelector("#instagram-combined-chart"), instagram_options);
  instagramCombinedChart.render();


  var instagram_Audience_gender_age_opts = {
    series: Object.values(instagram_Audience_gender_age),
    chart: {
    width: '100%',
    height: '250',
    type: 'pie',
  },
  labels: Object.keys(instagram_Audience_gender_age),
  responsive: [{
    breakpoint: 480,
    options: {
      chart: {
        width: 200
      },
      legend: {
        position: 'bottom'
      }
    }
  }]
  };

  var instagram_Audience_gender_age_chart = new ApexCharts(document.querySelector("#instagram_Audience_gender_age"), instagram_Audience_gender_age_opts);
  instagram_Audience_gender_age_chart.render();

  var instagram_Audience_town_city_opts = {
      series: Object.values(instagram_Audience_town_city),
      chart: {
      width: '100%',
      height: '250',
      type: 'pie',
    },
    labels: Object.keys(instagram_Audience_town_city),
    responsive: [{
      breakpoint: 480,
      options: {
        chart: {
          width: 200
        },
        legend: {
          position: 'bottom'
        }
      }
    }]
  };

  var instagram_Audience_town_city_chart = new ApexCharts(document.querySelector("#instagram_Audience_town_city"), instagram_Audience_town_city_opts);
  instagram_Audience_town_city_chart.render();
</script>